<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese New Year Interactive Game</title>
    <style>
        :root {
            --cny-red: #8B0000;
            --cny-gold: #FFD700;
            --cny-orange: #FF4500;
        }

        body { 
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif; 
            background-color: var(--cny-red); 
            color: #fff; 
            text-align: center; 
            padding: 10px; 
            margin: 0;
            overflow-x: hidden;
        }

        h1 { 
            color: var(--cny-gold); 
            text-shadow: 2px 2px 4px #000; 
            margin: 15px 0 10px;
            font-size: 1.8rem;
        }
        
        .reset-container { margin-bottom: 15px; }
        .reset-btn { 
            background-color: var(--cny-gold); 
            color: var(--cny-red); 
            border: none; 
            padding: 8px 16px; 
            font-size: 14px; 
            font-weight: bold; 
            border-radius: 5px; 
            cursor: pointer; 
            transition: 0.3s;
        }
        .reset-btn:hover { background-color: #fff; }

        /* --- ç¶²æ ¼ä½ˆå±€è¨­å®š --- */
        .grid { 
            display: grid; 
            /* æ‰‹æ©Ÿç‰ˆï¼šæ¯è¡Œ 3 æ ¼ */
            grid-template-columns: repeat(3, 1fr); 
            gap: 10px; 
            width: 100%;
            max-width: 1300px; /* ç‚ºäº† 8 æ ¼ä½ˆå±€ï¼Œç¨å¾®åŠ å¯¬æœ€å¤§å¯¬åº¦ */
            margin: 0 auto; 
            padding: 10px;
            box-sizing: border-box;
        }

        /* æ¡Œå¤§å‹é›»è…¦ (Desktop)ï¼šæ¯è¡Œ 8 æ ¼ */
        @media (min-width: 992px) {
            .grid { 
                grid-template-columns: repeat(8, 1fr); 
                gap: 12px;
            }
            h1 { font-size: 2.5rem; }
        }

        .box { 
            background-color: var(--cny-orange); 
            border: 3px solid var(--cny-gold); 
            border-radius: 10px; 
            aspect-ratio: 1 / 1; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 1.3rem; /* å¯¬åº¦è¼ƒçª„æ™‚ç¸®å°å­—é«”ä»¥å…æ“ å£“ */
            font-weight: bold; 
            cursor: pointer; 
            transition: transform 0.2s, background-color 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        @media (min-width: 1200px) {
            .box { font-size: 1.5rem; }
        }

        .box:hover { transform: scale(1.05); background-color: #FF6347; }

        .box.used { 
            background-color: #555 !important; 
            border-color: #888 !important; 
            color: #aaa !important; 
            cursor: default;
            transform: none;
            box-shadow: none;
        }
        
        /* Modal å½ˆçª—æ¨£å¼ */
        #modal { 
            display: none; 
            position: fixed; 
            top: 0; left: 0; 
            width: 100%; height: 100%; 
            background: rgba(0,0,0,0.95); 
            justify-content: center; 
            align-items: center; 
            z-index: 1000; 
        }

        .modal-content { 
            background: #fff; 
            color: #333; 
            padding: 25px; 
            border-radius: 20px; 
            width: 90%; 
            max-width: 550px; 
            max-height: 85vh;
            overflow-y: auto;
            position: relative; 
            box-shadow: 0 0 20px var(--cny-gold);
        }

        .question-text { 
            font-size: 1.3rem; 
            margin-bottom: 20px; 
            font-weight: bold; 
            line-height: 1.5; 
            color: #222;
        }

        .choices { 
            display: none; 
            grid-template-columns: 1fr; 
            gap: 12px; 
            margin-top: 15px; 
        }

        .choice-btn { 
            background: #fdfdfd; 
            border: 2px solid var(--cny-red); 
            padding: 14px; 
            border-radius: 10px; 
            font-size: 1.1rem; 
            text-align: left;
            cursor: pointer;
            transition: 0.2s;
        }

        .choice-btn:hover { background: #fff5f5; }
        .choice-btn.correct { background-color: #4CAF50 !important; color: white; border-color: #388E3C; }
        .choice-btn.wrong { background-color: #f44336 !important; color: white; border-color: #d32f2f; }
        
        .hint-btn { 
            background: var(--cny-gold); 
            color: var(--cny-red);
            width: 100%;
            padding: 15px; 
            font-size: 1.1rem; 
            font-weight: bold; 
            border-radius: 10px; 
            border: none;
            cursor: pointer;
        }

        .close-btn { 
            margin-top: 20px; 
            background: #444; 
            color: white; 
            padding: 12px; 
            width: 100%;
            border-radius: 10px; 
            border: none;
            cursor: pointer;
            font-size: 1rem;
        }
        
        #feedback { font-size: 1.2rem; font-weight: bold; margin-top: 15px; min-height: 1.5em; }
    </style>
</head>
<body>

    <h1>ğŸ§§ æ–°å¹´æŒ‘æˆ° ğŸ§§</h1>
    
    <div class="reset-container">
        <button class="reset-btn" onclick="resetGame()">ğŸ”„ é‡ç½®éŠæˆ²é€²åº¦</button>
    </div>

    <div class="grid" id="gameGrid"></div>

    <div id="modal">
        <div class="modal-content">
            <div id="questionContainer" class="question-text"></div>
            <button class="hint-btn" id="hintBtn" onclick="showChoices()">é¡¯ç¤ºé¸é … (æç¤º)</button>
            <div id="choicesContainer" class="choices"></div>
            <div id="feedback"></div>
            <button class="close-btn" onclick="closeModal()">é—œé–‰è¦–çª—</button>
        </div>
    </div>

    <script>
        const rawData = [
            { q: "å‚³èªªä¸­ï¼Œæ”¾é­ç‚®å’Œè²¼ç´…å°è¯æ˜¯ç‚ºäº†åš‡è·‘å“ªéš»æ€ªç¸ï¼Ÿ", a: ["A) éº’éºŸ", "B) å¹´ç¸", "C) é¾", "D) é¥•é¤®"], correct: 1 },
            { q: "é™¤å¤•å¤œå…¨å®¶äººèšåœ¨ä¸€èµ·åƒçš„é£¯ç¨±ç‚ºä»€éº¼ï¼Ÿ", a: ["A) æ…¶åŠŸå®´", "B) è¬ç¶é£¯", "C) åœ˜åœ“é£¯", "D) è‡˜å…«ç²¥"], correct: 2 },
            { q: "éå¹´åƒå¹´ç³•ï¼Œå¯“æ„æ˜¯ä»€éº¼ï¼Ÿ", a: ["A) æ‹›è²¡é€²å¯¶", "B) æ­¥æ­¥é«˜å‡", "C) é•·å‘½ç™¾æ­²", "D) åœ˜åœ˜åœ“åœ“"], correct: 1 },
            { q: "å“ªç¨®æ°´æœå› ç‚ºè«§éŸ³ã€Œå¤§å‰å¤§åˆ©ã€ï¼Œæ˜¯éå¹´å¸¸å‚™çš„æ°´æœï¼Ÿ", a: ["A) è˜‹æœ", "B) æ©˜å­", "C) è¥¿ç“œ", "D) è‘¡è„"], correct: 1 },
            { q: "ã€Œå€’ã€è²¼ç¦å­—ï¼Œè±¡å¾µè‘—ä»€éº¼æ„æ€ï¼Ÿ", a: ["A) ç¦æ°£å¼„ä¸Ÿäº†", "B) ç¦æ°£å€’éœ‰", "C) ç¦åˆ°äº†", "D) ç¦æ°£æ»¿æ»¿"], correct: 2 },
            { q: "å‚³çµ±ç¿’ä¿—ä¸­ï¼Œå¤§å¹´åˆå¹¾æ˜¯ã€Œå›å¨˜å®¶ã€çš„æ—¥å­ï¼Ÿ", a: ["A) åˆä¸€", "B) åˆäºŒ", "C) åˆä¸‰", "D) åˆäº”"], correct: 1 },
            { q: "éå¹´åƒçš„ã€Œé¤ƒå­ã€å½¢ç‹€åƒä»€éº¼ï¼Œæ‰€ä»¥è±¡å¾µè²¡å¯Œï¼Ÿ", a: ["A) åœ“çƒ", "B) å…ƒå¯¶", "C) æœˆäº®", "D) éŒ¢è¢‹"], correct: 1 },
            { q: "åäºŒç”Ÿè‚–ä¸­ï¼Œå”¯ä¸€ä¸€å€‹ç¾å¯¦ä¸­ä¸å­˜åœ¨çš„å‹•ç‰©æ˜¯ï¼Ÿ", a: ["A) è›‡", "B) é¾", "C) è™", "D) çŒ´"], correct: 1 },
            { q: "å“ªä¸€å€‹ç¯€æ…¶è±¡å¾µè¾²æ›†æ–°å¹´çš„çµæŸï¼Ÿ", a: ["A) ç«¯åˆç¯€", "B) ä¸­ç§‹ç¯€", "C) å…ƒå®µç¯€", "D) é‡é™½ç¯€"], correct: 2 },
            { q: "é­šæ˜¯å¹´å¤œé£¯å¿…å‚™èœé¤šï¼Œè±¡å¾µä»€éº¼ï¼Ÿ", a: ["A) å¹´å¹´æœ‰é¤˜", "B) é­šèºé¾é–€", "C) æ°´åˆ°æ¸ æˆ", "D) å¹´å¹´å¹³å®‰"], correct: 0 },
            { q: "éå¹´æ™‚ï¼Œé•·è¼©çµ¦æ™šè¼©çš„éŒ¢é€šç¨±ç‚ºï¼Ÿ", a: ["A) é›¶ç”¨éŒ¢", "B) çå‹µé‡‘", "C) å£“æ­²éŒ¢", "D) è¾›è‹¦éŒ¢"], correct: 2 },
            { q: "é³³æ¢¨åœ¨å°èªä¸­è«§éŸ³ç‚ºä»€éº¼ï¼Œè±¡å¾µå¥½é‹ï¼Ÿ", a: ["A) æ—ºä¾†", "B) ç¦ä¾†", "C) è²¡ä¾†", "D) é‹ä¾†"], correct: 0 },
            { q: "ä»€éº¼æ¨£çš„å¹´ä»½æœƒè¢«ç¨±ç‚ºã€Œæœ¬å‘½å¹´ã€ï¼Ÿ", a: ["A) æ»¿åæ­²çš„å¹´ä»½", "B) è‡ªå·±çš„ç”Ÿè‚–èˆ‡ç•¶å¹´ç›¸åŒ", "C) æœ¬æœˆç”Ÿæ—¥", "D) é–å¹´"], correct: 1 },
            { q: "å…ƒå®µç¯€é™¤äº†çœ‹ç‡ˆç± ï¼Œé‚„æœ‰ä»€éº¼æ ¸å¿ƒæ´»å‹•ï¼Ÿ", a: ["A) è³½é¾èˆŸ", "B) çŒœç‡ˆè¬", "C) è³æœˆ", "D) ç™»é«˜"], correct: 1 },
            { q: "å£“æ­²éŒ¢é€šå¸¸è£åœ¨ä»€éº¼é¡è‰²çš„å°è¢‹è£¡ï¼Ÿ", a: ["A) é»ƒè‰²", "B) ç´«è‰²", "C) ç´…è‰²", "D) é‡‘è‰²"], correct: 2 },
            { q: "åäºŒç”Ÿè‚–ä¸­ï¼Œæ’åœ¨ç¬¬ä¸€ä½çš„æ˜¯ï¼Ÿ", a: ["A) è™", "B) ç‰›", "C) é¼ ", "D) è±¬"], correct: 2 },
            { q: "å“ªä¸€å¤©è¢«ç¨±ç‚ºã€Œè²¡ç¥ç”Ÿæ—¥ã€ï¼Œå•†åº—é€šå¸¸æœƒåœ¨é€™å¤©é–‹å¸‚ï¼Ÿ", a: ["A) åˆä¸€", "B) åˆä¸‰", "C) åˆäº”", "D) åˆå…«"], correct: 2 },
            { q: "æ­£æœˆåˆä¸ƒè¢«ç¨±ç‚ºä»€éº¼æ—¥å­ï¼Ÿ", a: ["A) å¤©æ—¥", "B) åœ°æ—¥", "C) äººæ—¥", "D) ç©€æ—¥"], correct: 2 },
            { q: "ç¥­ç¶ç¯€ï¼ˆå°å¹´ï¼‰è¦ä¾›å¥‰ç³–ç“œï¼Œæ˜¯ç‚ºäº†è®“å“ªä½ç¥æ˜å˜´ç”œä¸€é»ï¼Ÿ", a: ["A) åœŸåœ°å…¬", "B) ç¶ç¥", "C) æ–‡æ˜Œå¸å›", "D) è²¡ç¥"], correct: 1 },
            { q: "å»£æ±ã€é¦™æ¸¯ä¸€å¸¶éå¹´å¸¸åƒçš„ã€Œé«®èœã€ï¼Œè«§éŸ³æ˜¯ä»€éº¼ï¼Ÿ", a: ["A) ç™¼è²¡", "B) ç™¼å¥®", "C) ç™¼é”", "D) ç™¼è‚²"], correct: 0 },
            { q: "ä¿—è©±èªªã€Œåˆä¸‰ç¡åˆ°é£½ã€ï¼Œå‚³èªªé€™ä¸€å¤©æ˜¯èª°å¨¶è¦ªçš„æ—¥å­ï¼Ÿ", a: ["A) è²“åª½åª½", "B) è€é¼ ", "C) é¾ç‹", "D) å¹´ç¸"], correct: 1 },
            { q: "éå¹´æœŸé–“ä¸èƒ½æ‹¿æƒå¸šå‘å¤–æƒåœ°ï¼Œä¸»è¦æ˜¯æ€•ä»€éº¼ï¼Ÿ", a: ["A) æŠŠç°å¡µæšèµ·", "B) æŠŠè²¡æ°£æƒå‡ºå»", "C) æƒå¸šæœƒå£æ‰", "D) æƒ¹æ€’åœ°åŸºä¸»"], correct: 1 },
            { q: "é™¤å¤•å¤œç†¬å¤œåˆ°å¤©äº®ï¼Œé€™å«ä»€éº¼ï¼Ÿ", a: ["A) å®ˆå¤œ", "B) å®ˆæ­²", "C) å®ˆéˆ", "D) å®ˆæ™‚"], correct: 1 },
            { q: "èˆç…è¡¨æ¼”ä¸­ï¼Œå—ç…åˆè¢«ç¨±ç‚ºä»€éº¼ï¼Ÿ", a: ["A) å‹‡ç…", "B) çŒ›ç…", "C) é†’ç…", "D) ç‘ç…"], correct: 2 },
            { q: "æ­£æœˆåˆä¹æ˜¯ã€Œå¤©å…¬ç”Ÿã€ï¼ŒæŒ‡çš„æ˜¯å“ªä½ç¥æ˜çš„èª•è¾°ï¼Ÿ", a: ["A) ç‰çš‡å¤§å¸", "B) é—œè–å¸å›", "C) åª½ç¥–", "D) è§€ä¸–éŸ³"], correct: 0 },
            { q: "å¤ä»£è¾²æ›†åäºŒæœˆåˆè¢«ç¨±ä½œä»€éº¼æœˆï¼Ÿ", a: ["A) æ¡ƒæœˆ", "B) è‡˜æœˆ", "C) èŠæœˆ", "D) ææœˆ"], correct: 1 },
            { q: "å‚³çµ±ç´…åŒ…é‡‘é¡ç‚ºä»€éº¼è¦é¿é–‹å–®æ•¸ï¼Ÿ", a: ["A) å–®æ•¸ä¸å‰åˆ©", "B) å¥½äº‹æˆé›™", "C) ç‚ºäº†å¥½è¨ˆç®—", "D) æ€•å¼„ä¸Ÿ"], correct: 1 },
            { q: "å“ªç¨®æ¤ç‰©èˆ‡æ¢…ã€ç«¹ä¸¦ç¨±ã€Œæ­²å¯’ä¸‰å‹ã€ï¼Ÿ", a: ["A) è˜­", "B) èŠ", "C) æ¾", "D) æŸ"], correct: 2 },
            { q: "éå¹´å¸¸èªªçš„ã€Œäº”ç¦è‡¨é–€ã€ï¼Œç¬¬ä¸€ç¦æŒ‡çš„æ˜¯ï¼Ÿ", a: ["A) å¯Œè²´", "B) é•·å£½", "C) åº·å¯§", "D) å¥½å¾·"], correct: 1 },
            { q: "æ˜¥ç¯€æ”¾é­ç‚®æœ€åˆçš„ç§‘å­¸ä½œç”¨æ˜¯ä»€éº¼ï¼Ÿ", a: ["A) æ…¶ç¥å‹åˆ©", "B) é©…é™¤ç˜´æ°£èˆ‡ç–«ç—…", "C) ç…§æ˜", "D) å‚³éè¨Šæ¯"], correct: 1 },
            { q: "æ˜¥è¯çš„èµ·æºæ˜¯å¤ä»£æ›åœ¨é–€ä¸Šçš„ä»€éº¼ï¼Ÿ", a: ["A) æŸ³æ¢", "B) æ¡ƒç¬¦", "C) éµç‰Œ", "D) ç•«åƒ"], correct: 1 },
            { q: "ç«è—¥ç™¼æ˜å‰ï¼Œã€Œçˆ†ç«¹ã€æ˜¯æ€éº¼ç™¼å‡ºéŸ¿è²çš„ï¼Ÿ", a: ["A) ç”¨åŠ›æ‘”", "B) ç‡’çƒ¤ç«¹å­ä½¿ä¹‹ç‚¸è£‚", "C) æ•²æ“Šç«¹ç­’", "D) å¹æ°£"], correct: 1 },
            { q: "é–€ç¥ä¸­æœ€è‘—åçš„ç§¦å”å¯¶èˆ‡å°‰é²æ­æ˜¯å“ªå€‹æœä»£çš„å°‡è»ï¼Ÿ", a: ["A) æ¼¢æœ", "B) å”æœ", "C) å®‹æœ", "D) æ˜æœ"], correct: 1 },
            { q: "æ˜¥è¯æ›¸å¯«æ™‚ï¼Œä¸Šè¯çš„æœ€å¾Œä¸€å€‹å­—é€šå¸¸æ˜¯ä»€éº¼è²èª¿ï¼Ÿ", a: ["A) å¹³è²", "B) ä»„è²", "C) è¼•è²", "D) å»è²"], correct: 1 },
            { q: "ã€Œä¸€å…ƒå¾©å§‹ã€ä¸­çš„ã€Œä¸€å…ƒã€æ˜¯æŒ‡ï¼Ÿ", a: ["A) ä¸€å¡ŠéŒ¢", "B) ç¬¬ä¸€å€‹æœˆ", "C) æ–°çš„ä¸€å¹´", "D) ç¬¬ä¸€å¤©"], correct: 2 },
            { q: "ä¿—ç¨±çš„ã€Œç ´äº”ã€æ˜¯æŒ‡å“ªä¸€å¤©ï¼Ÿ", a: ["A) åˆäº”", "B) åäº”", "C) åˆä¸€", "D) é™¤å¤•"], correct: 0 },
            { q: "ã€Œå†¬è‡³å¤§å¦‚å¹´ã€ï¼Œå†¬è‡³åœ¨å¤ä»£åˆè¢«ç¨±ç‚ºä»€éº¼ï¼Ÿ", a: ["A) æ­²é¦–", "B) äºæ­²", "C) çµ‚æ­²", "D) è‡˜æ—¥"], correct: 1 },
            { q: "ã€Œæ­²æœæ¸…ä¾›ã€æ˜¯æŒ‡éå¹´æ™‚åœ¨æ¡ˆé ­æ“ºæ”¾ä»€éº¼ï¼Ÿ", a: ["A) é‡‘æ¢", "B) é®®èŠ±ã€è”¬æœã€å¤ç©", "C) ç¥–å…ˆç‰Œä½", "D) å¹´å¹´æœ‰é£¯"], correct: 1 },
            { q: "ç¾ä»£ã€Œæ˜¥ç¯€ã€é€™å€‹æ­£å¼åç¨±ï¼Œæ˜¯åœ¨å“ªå€‹æ™‚æœŸç¢ºå®šçš„ï¼Ÿ", a: ["A) æ¸…æœ", "B) æ°‘åœ‹", "C) å”æœ", "D) å…ƒæœ"], correct: 1 },
            { q: "è¾²æ›†æ˜¯å±¬æ–¼å“ªä¸€ç¨®æ›†æ³•ï¼Ÿ", a: ["A) é™°æ›†", "B) é™½æ›†", "C) é™°é™½åˆæ›†", "D) æ˜Ÿåº§æ›†"], correct: 2 }
        ];

        const grid = document.getElementById('gameGrid');
        let currentBox = null;
        let currentIndex = null;
        let answered = false;
        const questions = rawData.slice(0, 40);

        function initGame() {
            grid.innerHTML = '';
            const savedProgress = JSON.parse(localStorage.getItem('cny_game_progress')) || [];
            questions.forEach((item, index) => {
                const box = document.createElement('div');
                box.className = 'box';
                box.innerText = index + 1;
                if (savedProgress.includes(index)) {
                    box.classList.add('used');
                    box.innerText = "âœ“";
                }
                box.onclick = () => openBox(index, box);
                grid.appendChild(box);
            });
        }

        function openBox(index, element) {
            if (element.classList.contains('used')) return;
            currentBox = element;
            currentIndex = index;
            answered = false;
            const data = questions[index];
            document.getElementById('questionContainer').innerText = data.q;
            document.getElementById('feedback').innerText = '';
            const choicesDiv = document.getElementById('choicesContainer');
            choicesDiv.innerHTML = '';
            data.a.forEach((choice, i) => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.innerText = choice;
                btn.onclick = () => checkAnswer(i, data.correct, btn);
                choicesDiv.appendChild(btn);
            });
            document.getElementById('modal').style.display = 'flex';
            document.getElementById('choicesContainer').style.display = 'none';
            document.getElementById('hintBtn').style.display = 'block';
        }

        function showChoices() {
            document.getElementById('choicesContainer').style.display = 'grid';
            document.getElementById('hintBtn').style.display = 'none';
        }

        function checkAnswer(selectedIndex, correctIndex, btn) {
            if (answered) return;
            const feedback = document.getElementById('feedback');
            const allBtns = document.querySelectorAll('.choice-btn');
            if (selectedIndex === correctIndex) {
                btn.classList.add('correct');
                feedback.innerText = "âœ… æ­£ç¢ºï¼";
                feedback.style.color = "#4CAF50";
            } else {
                btn.classList.add('wrong');
                allBtns[correctIndex].classList.add('correct');
                feedback.innerText = "âŒ ç­”éŒ¯äº†ï¼";
                feedback.style.color = "#f44336";
            }
            answered = true;
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
            if (currentBox && !currentBox.classList.contains('used')) {
                currentBox.classList.add('used');
                currentBox.innerText = "âœ“";
                saveProgress(currentIndex);
            }
        }

        function saveProgress(index) {
            let progress = JSON.parse(localStorage.getItem('cny_game_progress')) || [];
            if (!progress.includes(index)) {
                progress.push(index);
                localStorage.setItem('cny_game_progress', JSON.stringify(progress));
            }
        }

        function resetGame() {
            if (confirm("ç¢ºå®šè¦é‡ç½®æ‰€æœ‰é€²åº¦å—ï¼Ÿ")) {
                localStorage.removeItem('cny_game_progress');
                initGame();
            }
        }

        initGame();
    </script>
</body>
</html>
